[tox]
envlist = py27twisted,
          py27asyncio,
          py34asyncio,
          pypy2twisted,
          pypy2asyncio

[testenv]
commands = python -m pytest
deps = pytest

[testenv:py27twisted]
deps = twisted
commands = trial autobahn
basepython = python
install_command = pip install {packages} autobahn[twisted,serialization]
setenv =
   USE_TWISTED = 1

[testenv:py27asyncio]
deps = pytest
commands = python -m pytest
basepython = python
install_command = pip install {packages} autobahn[asyncio,serialization]
setenv =
   USE_ASYNCIO = 1

[testenv:py34asyncio]
deps = pytest
commands = python -m pytest
basepython = python3
install_command = pip install {packages} autobahn[asyncio,serialization]
setenv =
   USE_ASYNCIO = 1

[testenv:pypy2twisted]
deps = twisted
commands = trial autobahn
basepython = pypy
install_command = pip install {packages} autobahn[twisted,serialization]
setenv =
   USE_TWISTED = 1

[testenv:pypy2asyncio]
deps = pytest
commands = python -m pytest
basepython = pypy
install_command = pip install {packages} autobahn[asyncio,serialization]
setenv =
   USE_ASYNCIO = 1
